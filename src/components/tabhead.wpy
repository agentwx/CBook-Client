<style lang="less">
  @import "../styles/mixin";

  .tab-head {
    position: relative;
    .flex();
    background-color: #fff;

    &:after {
      z-index: -1;
    }
  }

  .tab-head-item {
    flex: 1;
    text-align: center;

    text {
      display: inline-block;
      padding: 30rpx 16rpx 24rpx;
      border-bottom: 6rpx solid transparent;
    }

    &.active {
      text {
        font-weight: bold;
        border-color: @gcolor;
      }
    }
  }
</style>

<template>
  <view class="tab-head hairline--bottom" wx:if="{{items.length>0}}" style="{{style}}">
    <repeat for="{{items}}">
      <view class="tab-head-item {{tabIndex == index ? 'active' : ''}}" @tap="tap('{{index}}')">
        <text>{{item}}</text>
      </view>
    </repeat>
  </view>
</template>

<script>
  import wepy from 'wepy'

  export default class Tabhead extends wepy.component {
    props = {
      style: {
        type: String,
        default: ''
      },
      tabIndex: {
        type: [String, Number],
        default: 0,
        coerce: v => +v,
        twoWay: true
      },
      items: {
        type: Array,
        default: []
      }
    }

    components = {}

    data = {
    }

    methods = {
      tap (index, $event) {
        index = Number(index)
        if (this.tabIndex === index) return
        this.tabIndex = index
        this.$emit('change', index, $event)
      }
    }
    onLoad (e) {
      this.$emit('change', this.tabIndex, e)
    }
  }
</script>
