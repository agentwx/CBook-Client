<style lang="less">
  @import "../styles/mixin";

  .icon {
    display: inline-block;
    line-height: 1;

    &.x-large {
      font-size: 80rpx;
    }

    &.large {
      font-size: 64rpx;
    }

    &.middle {
      font-size: 44rpx;
    }

    &.normal {
      font-size: 36rpx;
    }

    &.small {
      font-size: 30rpx;
    }

    &.x-small {
      font-size: 24rpx;
    }

    .iconfont {
      font-size: inherit;
      line-height: inherit;
    }

    .icon-img {
      display: block;
      width: 1em;
      height: 1em;
    }
  }
</style>

<template>
  <view class="icon {{isCustomSize ? '' : size}}" style="{{iconSize}}{{style}}">
    <text wx:if="{{type=='iconfont'}}" class="iconfont icon-{{name}}" style="{{iconColor}}"></text>
    <image wx:if="{{type=='svg'||type=='png'||type=='gif'}}" class="icon-img" src="../images/{{name}}.{{type}}"></image>
  </view>
</template>

<script>
  import wepy from 'wepy'

  export default class Icon extends wepy.component {
    props = {
      style: {
        type: String,
        default: ''
      },
      size: {
        type: String,
        default: 'normal'
      },
      name: {
        type: String,
        default: ''
      },
      type: {
        type: String,
        default: 'iconfont'
      },
      color: String
    }

    data = {
      isCustomSize: false
    }

    computed = {
      iconColor () {
        return this.color ? `color: ${this.color}` : ''
      },
      iconSize () {
        return this.isCustomSize ? `font-size: ${this.size};` : ''
      },
      isCustomSize () {
        return /^\d/.test(this.size)
      }
    }
  }
</script>
